{% extends 'base.html' %}

{% block content %}

{% include 'navbar.html' %}
{% include 'user/base_user.html' %}

    {% if user_id == base.observee_id %}

        <div class="profile-nav">
          <ul>
            <li><a href="{% url 'profile' base.observee_id%}">Posts</a></li>
            {% if base.observee_id == user_id %}
              <li><a href="{% url 'following' base.observee_id%}"  class="activated-link">Following</a></li>
              <li><a href="{% url 'follower' base.observee_id%}">Follower</a></li>
              <li><a href="{% url 'archive' base.observee_id%}">Archive</a></li>
              <li><a href="{% url 'edit-profile' %}">Edit profile</a></li>
            {% endif %}

          </ul>
        </div>

    {% endif %}

<div class="search-users-body">
    {% for following in user_following %}
        <div class="search_users clearfix">
                
                    <div class="searchee_photo">
                        <a href="{% url 'profile' following.id %}"><img src="{{ following.profile_photo }}" alt="identity"></a>
                    </div>
                    <div class="searchee_name">
                        <a href="{% url 'profile' following.id %}">{{ following.name }}</a>

                        <hr />
                        <span>
                            <p>{{ following.username }}</p>
                            <a href="http://127.0.0.1:8000/user/{{ following.id }}/follower">Follower {{ following.follower_count }}</a>
                            <a href="http://127.0.0.1:8000/user/{{ following.id }}/followee">Following {{ following.followee_count }}</a>

                            <br />
                            <div class="profile-another-link">
                                  <a href="{{ following.fb_link }}"><i class="fa fa-facebook"></i></a>
                                  <a href="{{ following.tw_link }}"><i class="fa fa-twitter"></i></a>
                            </div>
                        </span>




                    </div>
                    <div class="searchee_follow">
                        {%csrf_token%}
                        {% if user_id != following.id %}
                            {% if following.isFollowee %}
                                <button onClick="follow_button(this, '{{ user_id}}', '{{ following.id }}', 1,1)">Unfollow</button>
                            {% elif following.isFollower %}
                                <button onClick="follow_button(this, '{{ user_id}}', '{{ following.id }}', 1,1)">Follow back</button>
                            {% else %}
                                <button onClick="follow_button(this, '{{ user_id}}', '{{ following.id }}', 1,1)">Follow</button>
                            {% endif %}
                        {% endif %}
                    </div>
                
        </div>
    {% endfor %}
</div>

{% endblock %}